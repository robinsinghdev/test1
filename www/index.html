<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=medium-dpi" />

        <!-- <link rel="stylesheet"  href="libs/jQM-flat/jquery.mobile.flatui.css"> -->
        <link rel="stylesheet"  href="libs/jQueryMobile/jquery.mobile-1.4.5.min.css">
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" href="libs/jqm-datebox-1.4.5.css" />
        
        <script type="text/javascript" src="libs/fastclick.min.js"></script>
        <script type="text/javascript" src="phonegap.js"></script>
        <!-- <script type="text/javascript" src="libs/jquery-2.0.3.min.js"></script> -->
        <script type="text/javascript" src="libs/jquery.min.js"></script>
        
        <script type="text/javascript" src="libs/jQueryMobile/jquery.mobile-1.4.5.min.js"></script>
		<script src="libs/jqm-datebox-1.4.5.js"></script>
		<script type="text/javascript" src="js/timer.jquery.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
<!--         <script type="text/javascript" src="js/timeTracker.js"></script> -->
		
		
        <script type="text/javascript">
            app.initialize();
        </script>
        
        <title>BP Metrics</title>
    </head>
	<body>
		
        <div id="app">
        
        	<div  id="login-page" data-role="page">
                <div data-role="content">
					<div  class="login-box">
						<div id="logoContainer" class="centerText">
								<img src="img/kgr_logo_white.png" id="logo"  />
						</div>
						<form  id="loginForm" action="">
							<label for="username">Username</label>
							<input type="email" name="username" id="username" placeholder="Username"/>
							<label for="password">Password </label>
							<input type="password" name="password" id="password" placeholder="Password" autocomplete="off"/>
							<br/>
							<input type="submit" value="Login <img src='img/wifi-icon-24px.png' class='wifi-icon' />" id="submitButton" class="app-link" data-theme="a" />
						</form>
					</div>
                </div>
                
                <div data-position="fixed"   class="app-footer-section" class="footer-div">
                    <div class="version-number-text">v1.3.1</div>
                </div>
            </div>
             
			<div id="home-page" data-role="page">
				<div data-role="header" data-id="header" id="header" data-position="fixed" class="ui-header app-header-section">
					<a href="#overlayPanel" class="ui-btn ui-corner-all ui-icon-bars ui-btn-icon-notext">Roles Menu</a>
                    <h1>Homepage</h1>
					<a href="#" class="ui-btn ui-corner-all ui-icon-power ui-btn-icon-notext ui-btn-right" onclick="doLogout();">Logout</a>
                </div>
                
                <div data-role="content" >
                	<div data-role="panel" id="overlayPanel" data-display="overlay">
					    <h4>Select Role <img src="img/wifi-icon-24px.png" class="wifi-icon" /></h4>
					     <ul data-role="listview" id="userRolesUl">
						  	<li id="5" onclick="changeLoginRole(5,'Templating'); return false;" ><a href="#">Templating</a></li>
						  	<li id="7" onclick="changeLoginRole(7,'Production'); return false;"><a href="#">Production</a></li>
						  	<li id="9" onclick="changeLoginRole(9,'Quality Control'); return false;"><a href="#">Quality Control</a></li>
						  	<li id="10" onclick="changeLoginRole(10,'Installing'); return false;"><a href="#">Installing</a></li>
						 </ul>
					 </div> 
					 
                	<div id="menu">
                		<div>
                			<h4>Welcome Dev, <span id="userFullName"></span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span id="userRoleShow"></span></h4>
                		</div>	
                		<div class="home-links-div" >
	                		<ul class="home-page-menu-ul" data-role="listview"  data-divider-theme="a">
	                			<li data-role="list-divider">Sales Order</li> 
							    <li data-icon="bars"><a href="#" onclick="getCategoriesForTimeTracking();">Open Sales Orders</a></li>
							    <li data-icon="plus"><a href="#getSOBySONumberDialog" data-rel="dialog">Add Sales Order</a></li>
							    <li data-role="list-divider">User Roles</li>
							    <li data-icon="action"><a href="#overlayPanel" >Select Role </a></li>
							</ul>
							<br/>
						</div>
						<br/>
						
						<div class="sync-btn-div">
							<input type="button" value="Set <img src='img/wifi-icon-24px.png' class='wifi-icon' />"  onclick="callSyncNow();" id="callSyncNowBtn" class="app-link" data-theme="a" />
	                    </div>
						
						<div class="display-none">
							<div id="syncCallTimerDiv"> </div>
						</div>
                	</div>
					
                </div>
                <div data-role="footer" data-id="footer1" data-position="fixed" class="app-footer-section" class="footer-div">
                    <div id="navbar" data-role="navbar">
                        <ul>
                            <li><a id="map-button" href="#home-page" data-icon="home" data-theme="b" class="app-link active">Home</a></li>
                            <li><a id="list-button" href="#" onclick="getCategoriesForTimeTracking();" data-icon="bars" class="app-link">Sales Order</a></li>
                        </ul>
                    </div>
                </div>
            </div>
			
			<div id="view-all-sales-order" data-role="page">
                <div data-role="header" data-id="header" id="header" data-position="fixed" class="ui-header app-header-section">
                	<a href="#" data-rel="back" class="ui-btn ui-corner-all ui-icon-back ui-btn-icon-notext">Back</a>
                    <h1>Sales Order</h1>
					<a href="#" class="ui-btn ui-corner-all ui-icon-power ui-btn-icon-notext ui-btn-right" onclick="doLogout();">Logout</a>
                </div>
                
                <div data-role="content" >
                	<div id="timeTrackerInfoDiv">
                	    <a href="#getSOBySONumberDialog" class="mini-btn" data-theme="a" data-role="button"  data-rel="dialog" onclick="getSOBySONumberOpen();">Add Sales Order</a>
                    </div>
                    <hr class="style">
                    
                    <div id="running_tracker" class="running-tracker display-none">
					    <p class="running-tracker-info" style="text-align: center;">
							<span id="logging_order_color_code" class="order-detail" style="background-color: #20B2AA;width: 50px;" class="">&nbsp;&nbsp;&nbsp;&nbsp;</span>
							<span id="logging_detail" class="order-detail" class="">Dummy Data # </span>
							<span class="" id="logging_proc_icon" >
								<img class="icon-img" src="img/prod_handover.png" id="timer_img_1_" data-order="1" data-timecat="1" data-action="clock" onclick="logTimer(this);return false;">
							</span> 
						</p>
						 
					    <div class="ui-grid-c" style="text-align: center;" id="currRunningTracker" class="current-running-tracker" >
					    
						  	<div id="logging_time" class="ui-block-a logging-time" >00:00</div>
						  
						  	<div class="ui-block-b">
						  		<div id="logging_play" class="timer timer-icon play" data-timecat="1" data-action="clock" onclick="logTimer(this);return false;"></div>
						  		<div id="logging_pause" class="timer timer-icon pause display-none" data-timecat="1" data-action="pause" onclick="logTimer(this);return false;"></div>
						  	</div>
							<div class="ui-block-c">
							  	<div id="logging_clock" class="timer timer-icon clock" data-action="logtime" data-order="1" data-timecat="1" onclick="logTimer(this);updateTrackerVariable();" >
								</div>
							</div>
							<div class="ui-block-d">
								  <div id="logging_delete" class="timer timer-icon delete" data-action="delete" id="timer_img_1_" data-order="1" data-timecat="1" onclick="logTimer(this);return false;">
								  </div>
							</div>	  
						</div>
					    <hr class="style">  
					</div>    
                    
                    <div id="salesOrderMainDiv">
                	</div>
                </div>
                
                <div data-role="footer" data-id="footer1" data-position="fixed"   class="app-footer-section" class="footer-div">
                    <div id="navbar" data-role="navbar">
                        <ul>
                            <li><a id="map-button" href="#home-page" data-icon="home" data-theme="b" class="app-link">Home</a></li>
                            <li><a id="list-button" href="#" onclick="getCategoriesForTimeTracking();" data-icon="bars" class="app-link active">Sales Order</a></li>
                        </ul>
                    </div>
                </div>
            </div>
			
			<div data-role="page" id="getSOBySONumberDialog" data-close-btn="right" data-corners="false" >
			  <div data-role="header">
				<h1>Create Sales Order</h1>
			  </div>
			  <div data-role="content">
			  	<p class="msg-info sales-order-msg"></p>
			  	<label for="Sales Order Number">Sales Order Number </label>
				<input type="text" name="sp_salesOrderNumber" id="sp_salesOrderNumber" placeholder="Sales Order Number" autocomplete="off" />
				
				<div id="sp_details_div" class="display-none">
					<label for="Sales Order Number">Job Name</label>
					<input type="text" name="sp_jobName" id="sp_jobName" placeholder="Job Name" autocomplete="off" />
					<label for="Sales Order Number">Choose Color</label>
					<input type="text" name="chooseColorForSalesOrder" id="chooseColorForSalesOrder" placeholder="Choose Color" autocomplete="off" />
					<input type="hidden" name="salesOrderColorId" id="salesOrderColorId" />
					
					<p style="text-align: center;"><span id="colorForSO" style="width: 50%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
				</div>
				
				<div class="ui-grid-a sales-order-btn-group">
				  <div class="ui-block-a" ><a  id="tryAgainBtn" class="display-none" data-theme="a" data-role="button" href="#" onclick="tryAgainSOBySONumber();" >Try Again</a></div>
				  <div class="ui-block-a display-none" ><a  id="showOrderBtn" class="" data-theme="a" data-role="button" href="#" onclick="showOrderSOBySONumber();" >Show Order</a></div>
				  <div class="ui-block-b"><a id="getSOBySONumberBtn" data-theme="a" data-role="button" href="#" onclick="getSOBySONumber();" >Submit</a></div>
				  <div class="ui-block-b"><a id="addNewSalesOrderBtn" class="display-none"  data-theme="a" data-role="button" href="#" onclick="createNewSO();" >Create</a></div>
				</div>
				
			  </div>
			</div>
			
			<div id="view-log-time-history" data-role="page">
                <div data-role="header" data-id="header" id="header" data-position="fixed" class="ui-header app-header-section">
                	<a href="#" data-rel="back" class="ui-btn ui-corner-all ui-icon-back ui-btn-icon-notext">Back</a>
                    <h1>Log Time History</h1>
					<a href="#" class="ui-btn ui-corner-all ui-icon-power ui-btn-icon-notext ui-btn-right" onclick="doLogout();">Logout</a>
                </div>
                
                <div data-role="content" id="viewLogTimeHistoryContent" >
                	<div>
                	    <a href="#" class="mini-btn" data-theme="a" data-role="button" onclick="addLogTime();" >Log More Time</a>
                	    <hr class="style">
                    </div>
                    
                    <div id="so_details_box" class="so-details-box">
                    	<div class="so-color-box" >
                    		<span style="">&nbsp;</span>
                        </div>
                        <div class="so-name-box" >
                        	Order: <span class="" id="so_name">1 time Customer Customer #123</span>
                        </div>
                    </div>
                    
                    <div data-role="tabs" id="tabs">
						  <div data-role="navbar">
						    <ul class="history-tabs">
						      <li><a href="#historyTab" data-ajax="false" class="ui-btn-active"><span>TT Report</span> <span><img src='img/wifi-icon-16px.png' class='wifi-icon' /></span></a></li>
						      <li><a href="#historyLocalTab" data-ajax="false" >LCL Report</a></li>
						    </ul>
						  </div>
						  <div id="historyTab" class="ui-body-d ui-content">
						    <div id="logTimeHistoryDiv">
						    	<div id="logTimeDiv" class="log-time-entry-div logTimeDiv1 text-align-center">
										<div class="process-name">This order has no previous logged time history.</div>
								</div>
								<!--<div class="log-time-entry-div logTimeDiv1" id="logTimeDiv"><div class="date-time-details">Date:<span class="">2015-10-13</span><span class="pull-right">1:03 hrs</span></div><div class="process-details"><div class="ui-grid-a my-breakpoint"><div class="ui-block-a"><div class="process-img"><img src="img/prog_production.png"></div><div class="process-name">Programming Production</div></div><div class="ui-block-b text-align-right"><span class="link-custom-spam"><a data-category="prog_production" data-crewsize="3" data-time="1:03" data-date="2015-10-13" data-id="11" data-sotimeid="1" data-comment="dsfdsfdxfdsg dfgdfgd dfgdf" href="#" onclick="editLogTime(this);">Edit</a></span></div></div><div class="more-process-details-main "><div class="text-align-right"><a class="link" href="#" onclick="moreProcessDetails(this);">Show Details</a></div><div style="display: none;" class="more-process-details moreDetailsDiv12"><p class="process-comment">Revision: <span class="text-purple" style="vertical-align: top;">Work</span></p><p class="process-comment">Comment: <span>No Comments Yet.</span></p></div></div></div></div>-->                    
 							</div>
						    
						  </div>
						  <div id="historyLocalTab">
						    	<div id="logTimeHistoryLocalDiv">
						    		<div id="logTimeDiv" class="log-time-entry-div logTimeDiv1 text-align-center">
											<div class="process-name">This order has no previous logged time history.</div>
									</div>
						    	</div>
						  </div>
					</div>
                </div>
                
                <div data-role="footer" data-id="footer1" data-position="fixed"   class="app-footer-section" class="footer-div">
                    <div id="navbar" data-role="navbar">
                        <ul>
                            <li><a id="map-button" href="#home-page" data-icon="home" data-theme="b" class="app-link">Home</a></li>
                            <li><a id="list-button" href="#" onclick="getCategoriesForTimeTracking();" data-icon="bars" class="app-link">Sales Order</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
             
            <div id="add-log-time" data-role="page">
                <div data-role="header" data-id="header" id="header" data-position="fixed" class="ui-header app-header-section">
                	<a href="#" data-rel="back" class="ui-btn ui-corner-all ui-icon-back ui-btn-icon-notext">Back</a>
                    <h1>Log Time Entry</h1>
					<a href="#" class="ui-btn ui-corner-all ui-icon-power ui-btn-icon-notext ui-btn-right" onclick="doLogout();">Logout</a>
                </div>
                
                <div data-role="content" id="addLogTimeContent">
                	
              	  	<div id="so_details_box" class="so-details-box">
                    	<div class="so-color-box" >
                    		<span style="">&nbsp;</span>
                        </div>
                        <div class="so-name-box" >
                        	Order: <span class="" id="so_name">1</span>
                        </div>
                    </div>
                    	
                    <div id="addLogTimeMainDiv" class="add-log-time-main-div">
                    	<form id="addLogTimeForm">
                    		<div class="display-none">
                    			<input type="hidden" id="staffTimeId" value="">
                    			<input type="hidden" id="soTimeId" value="">
                    		</div>
		                   	<div class="ui-field-contain">
							    <label for="select-native-2">
							    	Process: <span class="" id="process-img" style="vertical-align: top;">
		                        				<img id="changeTimeCatImageId" width="25px" src="img/prod_materials.png">
		                        			</span>
		                        </label>
		                    	<select onchange="changeTimeCatImage(this); return false;" name="timeCat" id="timeCat" data-mini="true" >                    
		                    		<option value="">--Select Process--</option>
		                            <option value="prod_materials">Production Materials</option>
		                            <option value="prod_setup">Production Setup</option>
		                            <option value="prod_handover">Production Handover</option>
		                        </select>
		                    </div>   
		                    
							<!-- <h4> Modify time logged: </h4> -->
		                    <div class="ui-field-contain">
							    <label for="Date">Date </label>
							    <input type="text" data-mini="true" data-role="datebox" id="logDate" name="logDate" readonly="readonly"
							    	data-options='{"mode": "calbox", "overrideDateFormat": "%Y-%m-%d"}' >
		                    </div>
		                    
		                     <div class="ui-field-contain time-input-div">	
								<label for="Time">Time</label>
								<div class="input-div">
									<span>Hour</span>
									<input type="text" data-mini="true" onchange="getDataForTotalTimeCalc();" id="logHours" name ="logHours" />
									<span>Min</span>
									<input type="text" data-mini="true" onchange="getDataForTotalTimeCalc();" id="logMinutes" name ="logMinutes">
								</div>
								<!-- 
		                    	<input onchange="getDataForTotalTimeCalc();" type="text" data-mini="true" data-role="datebox" id="logTime" name="logTime" readonly="readonly"
							    	data-options='{"mode": "durationflipbox","overrideDurationOrder":["h","i"] ,"overrideDurationFormat": " %Dl:%DM "}' >
		                    	 -->
		                    </div>
		                    
		                    <div class="ui-field-contain">
							    <label for="Comment">Comment </label>
							    <textarea cols="" rows="4" name="logComment" id="logComment" style="width: 65% !important;"></textarea>
		                    </div>     
		                    
		                    <div class="ui-field-contain">
		                    	<label for="Crew Size">Crew Size </label>
		                    	<select onchange="getDataForTotalTimeCalc();" name="crewSize" id="crewSize" data-mini="true" >                    
		                    		<option value="1">1</option>
		                            <option value="2">2</option>
		                            <option value="3">3</option>
		                            <option value="4">4</option>
		                            <option value="5">5</option>
		                            <option value="6">6</option>
		                            <option value="7">7</option>
		                            <option value="8">8</option>
		                            <option value="9">9</option>
		                            <option value="10">10</option>
		                            <option value="11">11</option>
		                            <option value="12">12</option>
		                            <option value="13">13</option>
		                            <option value="14">14</option>
		                            <option value="15">15</option>
		                            <option value="16">16</option>
		                        </select>
		                    </div> 
		                    
		                    <div class="ui-field-contain">
		                    	<p><span >Total Time </span><span id="totalCrewTime">00:00</span></p>
		                    </div>
		                    
		                    <div class="ui-grid-a">
						      <div class="ui-block-a" ><input type="button" id="logTimeSubmitBtn" value="Log Time" data-flag="add" onclick="callAddUpadteLogTime(this,'logTime');" /></div>
						      <div class="ui-block-b" ><input type="button" id="logTimeRevisionSubmitBtn" value="Revision Log Time" data-flag="add" onclick="callAddUpadteLogTime(this,'logTimeRevision');" /></div>
						    </div>
						</form>	    
                	</div>
                	
                </div>	
                
                <div data-role="footer" data-id="footer1" data-position="fixed"   class="app-footer-section" class="footer-div">
                    <div id="navbar" data-role="navbar">
                        <ul>
                            <li><a id="map-button" href="#home-page" data-icon="home" data-theme="b" class="app-link">Home</a></li>
                            <li><a id="list-button" href="#" onclick="getCategoriesForTimeTracking();" data-icon="bars" class="app-link">Sales Order</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
        </div>
		
    </body>
</html>
